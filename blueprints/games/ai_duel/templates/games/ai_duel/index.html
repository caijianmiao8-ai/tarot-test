<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AI 斗蛐蛐</title>
  <link rel="stylesheet" href="{{ url_for('ai_duel.static', filename='main.css') }}">
</head>
<body id="app-ai-duel">
  <!-- 启动蒙层 -->
  <div id="boot" class="boot">
    <div class="box">
      <h2>正在载入模型列表</h2>
      <p id="boot-tip">初始化中…</p>
      <div class="progress"><div id="boot-bar" class="bar" style="width:0%"></div></div>
      <div class="pct"><span id="boot-pct">0%</span></div>
    </div>
  </div>

  <div class="wrap" style="display:none" id="main">
    <h1>AI 斗蛐蛐</h1>

    <!-- 题目 -->
    <div class="cfg">
      <textarea id="topic" rows="3" placeholder="输入问题/话题，例如：'如何让开源社区更健康？'"></textarea>
    </div>

    <!-- 预设扩写 -->
    <div class="cfg">
      <div class="row">
        <input id="seed" class="grow" placeholder="一句设定（例：A 是严谨工程师；B 是有想象力的产品经理）"/>
        <label>Builder</label><select id="builderModel"></select>
        <button id="btnExpand">一键扩写为 A/B 预设</button>
      </div>
      <div class="row col">
        <label>A 角色预设</label>
        <textarea id="presetA" rows="3" placeholder="可手写或用一键扩写生成…"></textarea>
      </div>
      <div class="row col">
        <label>B 角色预设</label>
        <textarea id="presetB" rows="3" placeholder="可手写或用一键扩写生成…"></textarea>
      </div>
    </div>

    <!-- 模型与裁判 -->
    <div class="cfg">
      <div class="row">
        <label>A 模型</label><select id="modelA"></select>
        <label>B 模型</label><select id="modelB"></select>
        <label>回合</label><input id="rounds" type="number" min="1" max="10" value="4"/>
      </div>
      <div class="row">
        <label>裁判模型</label><select id="judgeModel"></select>
        <label class="chk"><input id="judgePerRound" type="checkbox" checked> 每轮裁判</label>
        <label class="chk"><input id="judgeFinal" type="checkbox"> 最终裁判</label>
      </div>
      <div class="row">
        <button id="start">开始对话</button>
        <button id="stop" disabled>停止</button>
      </div>
    </div>

    <div id="log" class="log"></div>
  </div>

  <script type="module" src="{{ url_for('ai_duel.static', filename='main.js') }}"></script>
</body>
</html>
