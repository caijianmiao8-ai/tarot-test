:root{
  --primary:#9d7ea8; --secondary:#6d5675; --gold:#e8d4a2; --gold-light:#f4e5c3;
  --bg1:#2d1b4e; --bg2:#1a1625;
  --text:#fff; --text-light:rgba(255,255,255,.88); --text-muted:rgba(255,255,255,.65);
  --panel:rgba(255,255,255,.06); --border:rgba(255,255,255,.12);
  --star:#ffd700; --success:#10b981; --warning:#f59e0b; --danger:#ef4444;
}

*{box-sizing:border-box}
html,body{height:100%;min-height:100dvh;min-height:calc(var(--vh,1vh)*100);}
html{ background:#120c1d; } /* iOS 底层白闪兜底 */
body{
  margin:0;
  font-family:'Noto Serif SC',-apple-system,BlinkMacSystemFont,'Segoe UI','PingFang SC','Hiragino Sans GB','Microsoft YaHei',serif;
  color:var(--text);
  background: linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 100%);
  display:flex; flex-direction:column; align-items:center;
  padding:20px;
  padding-top: calc(20px + env(safe-area-inset-top, 0px));
  padding-bottom: calc(20px + env(safe-area-inset-bottom, 0px));
  position:relative; overflow-x:hidden;
}

/* 顶部用户栏（与 index 保持一致） */
.user-bar{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(28,22,40,.6);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);padding-top:calc(env(safe-area-inset-top,0px) + 6px)}
.user-bar-content{max-width:1200px;margin:0 auto;padding:10px 20px;display:flex;justify-content:space-between;align-items:center}
.user-info{display:flex;align-items:center;gap:12px}
.user-icon{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;border:1px solid var(--border)}
.user-name{color:var(--gold-light);font-weight:600;letter-spacing:.5px}
.user-actions{display:flex;gap:10px;flex-wrap:wrap}
.user-actions a{color:var(--text-light);text-decoration:none;font-size:.95rem;padding:8px 14px;border-radius:18px;border:1px solid transparent;transition:.25s;background:rgba(255,255,255,.06);backdrop-filter:blur(8px)}
.user-actions a:hover{color:#fff;border-color:var(--border);transform:translateY(-1px)}

/* 主容器通用 */
.main-container{max-width:980px;width:100%;margin:calc(88px + env(safe-area-inset-top,0px)) auto 24px}
@media (max-width:768px){ .main-container{margin:calc(74px + env(safe-area-inset-top,0px)) auto 16px} }

/* 玻璃卡片、section、按钮（通用） */
.glass-card{background:var(--panel);border:1px solid var(--border);border-radius:22px;box-shadow:0 18px 36px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.08);overflow:hidden}
.section{background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:14px;padding:14px 16px;margin-top:12px;box-shadow:0 4px 12px rgba(0,0,0,.12)}
.section .title{display:flex;align-items:center;gap:10px;font-weight:700;color:var(--gold-light);margin-bottom:8px}
.section .content{color:var(--text-light);line-height:1.75}

.btn-grad{display:inline-flex;align-items:center;gap:10px;padding:11px 20px;border-radius:20px;border:1px solid var(--border);background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;font-weight:700;text-decoration:none;box-shadow:0 10px 24px rgba(157,126,168,.32);transition:.25s}
.btn-grad:hover{transform:translateY(-2px);box-shadow:0 14px 28px rgba(157,126,168,.42)}
.btn-ghost{display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border-radius:18px;border:1px solid var(--border);background:rgba(255,255,255,.08);color:#fff;text-decoration:none;transition:.25s}
.btn-ghost:hover{transform:translateY(-2px);box-shadow:0 8px 18px rgba(157,126,168,.35)}
button,.btn-grad,.btn-ghost{touch-action:manipulation}

/* 分割线 & 页脚 */
.divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.24),transparent);margin:16px 0}
.footer{text-align:center;color:var(--text-muted);font-size:.95rem;margin-top:6px}

/* 表单（登录/注册可直接套） */
.auth-card{max-width:520px;width:100%;margin:calc(88px + env(safe-area-inset-top,0px)) auto 24px;padding:28px}
.auth-card .header{text-align:center;margin-bottom:12px}
.auth-card .title{font-size:1.4rem;font-weight:800;color:var(--gold-light);letter-spacing:.6px}
.form-group{margin:12px 0}
label{display:block;margin-bottom:6px;color:var(--text-light)}
input,select,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:rgba(0,0,0,.15);color:#fff;font-size:16px}
input:focus,select:focus,textarea:focus{outline:none;border-color:rgba(255,255,255,.35);box-shadow:0 0 0 2px rgba(255,255,255,.12)}
.form-hint{color:var(--text-muted);font-size:.9rem;margin-top:6px}

/* iOS 小屏卡片比例 */
.tarot-card{aspect-ratio: 220 / 340; width: clamp(180px, 64vw, 260px); height:auto}
