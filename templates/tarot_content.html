<!-- templates/tarot_content.html -->

<div class="header">
    <h1>今日塔罗运势</h1>
    <p>揭示你今天的运势与指引。点击下面的卡牌抽取你的每日塔罗。</p>
</div>

<!-- 塔罗卡牌显示区 -->
<div class="tarot-card">
    {% if tarot_card %}
        <img src="{{ url_for('static', filename='images/cards/' ~ tarot_card.image) }}" 
             alt="{{ tarot_card.name }}" style="width:100%; height:100%; border-radius:15px;">
    {% else %}
        <i class="fas fa-question"></i>
    {% endif %}
</div>

<div class="action-section">
    {% if not user.is_guest %}
        {% if not has_drawn %}
            <form id="draw-form" method="POST" action="{{ url_for('draw_tarot') }}">
                <button id="draw-btn" class="btn-tarot" type="submit">
                    <i class="fas fa-hand-paper"></i> 抽牌
                </button>
            </form>
        {% else %}
            <div class="already-drawn">
                <i class="fas fa-check-circle"></i> 今日已抽过牌
            </div>
        {% endif %}
    {% else %}
        <div class="guest-tip">
            <i class="fas fa-info-circle"></i>
            访客无法抽牌，请先
            <a href="{{ url_for('login') }}">登录</a> 或
            <a href="{{ url_for('register') }}">注册</a>
        </div>
    {% endif %}
</div>

{% if tarot_card %}
    <div class="info-text">
        <h3>{{ tarot_card.name }} {% if tarot_card.reversed %}(逆位){% endif %}</h3>
        <p>{{ tarot_card.meaning_up if not tarot_card.reversed else tarot_card.meaning_rev }}</p>
    </div>
{% endif %}
